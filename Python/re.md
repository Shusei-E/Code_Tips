# 正規表現
`.`は、`\n`などとはmatchしないので注意。`|`を使えばorができる。


## Table of Contents
1. [Basics](#basics)
2. [繰り返しmatch](#繰り返しmatch)
3. [パターンの作り方](#パターンの作り方)
4. [パターンを別に定義](#パターンを別に定義)

## Basics
```py
re.match()  # 先頭から
re.search()  # 先頭に限らずマッチを探す
re.sub()  # substitute
```

## 繰り返しmatch
`finditer`を使う
```python
for matched in re.finditer(r"○<strong>(?P<Name>.+?)<\/strong>(?P<Speech>(.|\n)+?)(○|<\/span>)", str(soup)):
    name_list.append(matched.group("Name"))
    speech_list.append(clean_text(matched.group("Speech")))
```
繰り返す際に、テキスト冒頭からある回のloopでmatchしたところまでは、次のloopでは考慮されないようなので注意


## パターンの作り方
[参考](http://www.geocities.jp/m_hiroi/light/python04.html)

| メタ文字 | 意味                                                      |
|----------|-----------------------------------------------------------|
| |        | この前後にある正規表現のどちらかと一致する                |
| *        | 直前の正規表現の 0 回以上の繰り返しに一致する             |
| +        | 直前の正規表現の 1 回以上の繰り返しに一致する             |
| ?        | 直前の正規表現に 0 回もしくは１回一致する                 |
| {m,n}    | 直前の正規表現の m 回以上 n 回以下の繰り返し              |
| *?       | 直前の正規表現の 0 回以上の繰り返しに一致する（最短一致） |
| +?       | 直前の正規表現の 1 回以上の繰り返しに一致する（最短一致） |
| ??       | 直前の正規表現に 0 回もしくは１回一致する（最短一致）     |
| {m,n}?   | 直前の正規表現の m 回以上 n 回以下の繰り返し（最短一致）  |
| [ ]      | [ ] 内に指定した文字のどれかと一致する                    |
| [^ ]     | [ ] 内に指定した文字でない場合に一致する                  |
| .        | 任意の１文字と一致する                                    |
| ^        | 行頭と一致する                                            |
| $        | 行末と一致する                                            |
| ( )      | 正規表現をグループにまとめる                              |
| \        | メタ文字を打ち消す                                        |
| \A       | 文字列の先頭と一致                                        |
| \b       | 単語境界と一致 (\w と \W の間の空文字列と一致)            |
| \B       | \B 以外と一致                                             |
| \d       | 数字と一致                                                |
| \D       | \d 以外と一致                                             |
| \s       | 空白文字と一致                                            |
| \S       | \s 以外と一致                                             |
| \w       | 英数字とアンダースコア _ に一致 ([_a-zA-Z0-9] と同じ)     |
| \W       | \w 以外と一致                                             |
| \Z       | 文字列の末尾と一致                                        |


## パターンを別に定義
```python
prog = re.compile("pattern")
result = prog.match(string)
```
