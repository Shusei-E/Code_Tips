\documentclass[report,10.5pt,a4paper,oneside,openany,uplatex]{jsbook}
%--脚注の設定
\usepackage{natbib}
\bibpunct[, ]{(}{)}{;}{and}{}{,} %本文での引用の体裁はここで整えられるみたい

%--目次に索引以外は出力する cf. http://www.howtotex.com/packages/how-to-add-bibliography-and-more-to-table-of-contents/
\usepackage[notindex, nottoc, notlof, notlot]{tocbibind}

%--数式用
\usepackage{amsmath}
%--余白の設定   http://pcwide-jp.blogspot.co.uk/2009/07/latex.html  より
\usepackage[truedimen,top=25truemm,bottom=25truemm,left=25truemm,right=25truemm]{geometry}

%--図の設定
\usepackage[dvipdfmx]{graphicx,xcolor}
\graphicspath{{./figures/}}
%--行間の設定
\usepackage{setspace} 
\setstretch{1.13} % ページ全体の行間を設定

%--コードの設定
\usepackage{listings}
\usepackage{color}
\definecolor{dkgreen}{rgb}{0,0.6,0}
\definecolor{mygray}{rgb}{0.5,0.5,0.5}
\definecolor{mauve}{rgb}{0.58,0,0.82}

\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{backgroundcolour}{rgb}{0.95,0.95,0.95}

\usepackage{inconsolata} % Font for code
\lstset{ %
  language= {Python}, %ここを含めなければ、変に太字になったりしない
  aboveskip=2.5mm,
  belowskip=4.5mm,
  showstringspaces=false,
  columns=flexible,
  keepspaces=true,
  numbers=left,                    
  numbersep=5pt,    
  basicstyle={\small\fontfamily{zi4}\selectfont},
  commentstyle={\small\fontfamily{zi4}\selectfont},
  breaklines=true,
  breakatwhitespace=true,
  tabsize=3,
  frame=single, % lines or delete this line
  backgroundcolor=\color{backgroundcolour},   
  commentstyle=\color{codegreen},
  keywordstyle=\color{magenta},
  numberstyle=\tiny\color{codegray},
  stringstyle=\color{codepurple},
  xleftmargin = 1.1cm,
  framexleftmargin = 1em
}
\usepackage{xcolor}
\usepackage{framed}
\colorlet{shadecolor}{green!8}
\renewcommand{\textasteriskcentered}{\ensuremath{*}}
%--リンクの埋め込みを可能にする  \href{ **URL** }{表示テキスト}
\usepackage[dvipdfmx]{hyperref}
\usepackage{courier}
\usepackage{here}
%--日本語環境用の設定を追加
%\renewcommand{\refname}{参考文献}
%\renewcommand{\abstractname}{要約}
\usepackage{multirow}
\usepackage{placeins}

%--名前を英語に統一
\renewcommand{\bibname}{References}
\renewcommand{\contentsname}{Contents}
\renewcommand{\figurename}{Figure }
\renewcommand{\tablename}{Table }
\renewcommand{\lstlistingname}{Code}
\renewcommand{\listfigurename}{Figures}
\renewcommand{\listtablename}{Tables}
\renewcommand{\lstlistlistingname}{Codes}
\renewcommand{\appendixname}{Appendix }
\renewcommand{\prechaptername}{Chapter } 
\renewcommand{\postchaptername}{}  

%--Appendix
\usepackage[toc,page]{appendix}
\usepackage{cite} 

%--subsectionも目次に出力する
\setcounter{tocdepth}{2}

%--セクションのフォント
\renewcommand{\headfont}{\bfseries}

% Header
\usepackage{fancyhdr}
\pagestyle{fancy}
\fancyhead[RO,RE]{\rightmark}
\fancyhead[LE,LO]{\leftmark}
\renewcommand{\chaptermark}[1]{\markboth{Chapter \thechapter . ~#1}{}}
\renewcommand{\sectionmark}[1]{\markright{\thesection\ #1}{}}
\cfoot{\thepage}
\fancypagestyle{footerpagenum}
{
  \renewcommand{\headrulewidth}{0pt} \fancyhead[C]{} \fancyhead[L]{}
  \cfoot{\thepage}
}
\fancypagestyle{fancyappendix}
{
  \fancyhead[LE,LO]{Appendix \thechapter}
  % \fancyhead[RO,RE]{\thesection}
  % \renewcommand{\chaptermark}[1]{\markboth{Appendix \thechapter}{}}
  % \renewcommand{\sectionmark}[1]{\markright{\thesection\ ~#1}{}}
  \cfoot{\thepage}
}
% Make TOC style the same as other chapters
\makeatletter
\def\ps@plainfoot{%
  \let\@mkboth\@gobbletwo
  \let\@oddhead\@empty
  \def\@oddfoot{\normalfont\hfil \thepage \hfil}%
  \let\@evenhead\@empty
  \let\@evenfoot\@oddfoot}
\let\ps@plain\ps@plainfoot
\makeatother
\pagestyle{plain}

% Example: Do not show in Header
% \chapter*{Introdution}
% \markboth{Introduction}{}

%-----------------

%%--表紙の定義
\title{
  \vspace{-30truemm}
  {\Large Graduation Thesis}\\
  \vspace{5truemm}
  %{\Large }\\
  \vspace{15truemm}
  {\Huge THIS IS TITLE}\\
  \vspace{3truemm}
  {\Large SUBTITLE}
  \vspace{90truemm}
}
  
%%--著者の定義
\author{
   {\large MY COURSE} \\
  {\large MY DEPARTMENT}\\ \\
  \vspace{10truemm}
  {\Large MY NUNIVERSITY}\\
  \vspace{10truemm}
  {\LARGE MY NAME}
}
  
%%--日付の定義
\date{{\Large **/*****/****}}

\begin{document}
\maketitle              % 1ページ目の表紙生成
\thispagestyle{empty}   % 1ページ目はページ番号無し
\pagenumbering{roman}   % 目次はローマ字でページ番号を振る
\setcounter{page}{1}    % 目次のページ番号はi, ii, iii...
\tableofcontents        % 目次の生成
{%図一覧の生成
\let\oldnumberline\numberline%
\renewcommand{\numberline}{\figurename~\oldnumberline}%
\listoffigures%
} 
{%表一覧の生成
\let\oldnumberline\numberline%
\renewcommand{\numberline}{\tablename~\oldnumberline}%
\listoftables %
} 
{%Code一覧の生成
\let\oldnumberline\numberline%
\renewcommand{\numberline}{\lstlistingname~\oldnumberline}%
\lstlistoflistings %
} 
 
\input{abstract.tex}        % アブストラクト
\pagenumbering{arabic}  % 本文のページ番号 1, 2, 3...

%%--章毎にファイルを区切りる
\input{chapter1.tex} % 序論
\input{chapter2.tex} % 分析
\input{chapter3.tex} % 結語

%--ここからAppendix
\def\thesection{\Alph{section}}
\appendix
\renewcommand{\thefigure}{A.\arabic{figure}}
\renewcommand{\thetable}{A.\arabic{table}}
\setcounter{figure}{0}
\setcounter{table}{0}
\input{chapter_appendix_a.tex}

\renewcommand{\thefigure}{B.\arabic{figure}}
\renewcommand{\thesubsection}{B.\arabic{subsection}}
\renewcommand{\thetable}{B.\arabic{table}}
\setcounter{figure}{0}
\setcounter{table}{0}
\input{chapter_appendix_b.tex}


%--ここからBibliography
\bibliographystyle{apsr2006Edited} 
\bibliography{ref}\thispagestyle{footerpagenum}


\input{acknowledgement.tex}          % 謝辞
\end{document}
